{"version":3,"sources":["../../../../src/js/components/Tabs/index.js"],"names":["last","arr","pre","base","length","indexOf","replace","split","Tabs","state","showingPlus","handleBarClick","e","stopPropagation","props","createTab","handleTabClick","index","preventDefault","setActiveTab","handleRemoveClick","instance","removeTab","id","removePlus","setState","showPlus","style","active","tabs","context","instances","map","title","summary","promptPrefix","maximise","maxWidth","Component","displayName","propTypes","PropTypes","object","string","func","defaultProps","contextTypes","array","bool"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Tab, TabBar, TabBarEmpty, TabClose, TabPlus } from './styled-elements';\r\n\r\nfunction last(arr, pre = '') {\r\n  let base = arr.length > 2 ? `${arr[arr.length - 2]}` : '';\r\n  if (base.indexOf(`${pre}> `) !== 0) {\r\n    base = 'bash';\r\n  }\r\n  return base.replace(`${pre}> `, '').split(' ')[0];\r\n}\r\n\r\nclass Tabs extends Component {\r\n  static displayName = 'Tabs';\r\n\r\n  static propTypes = {\r\n    style: PropTypes.object, // eslint-disable-line\r\n    active: PropTypes.string,\r\n    setActiveTab: PropTypes.func,\r\n    removeTab: PropTypes.func,\r\n    createTab: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    style: {},\r\n  };\r\n\r\n  static contextTypes = {\r\n    instances: PropTypes.array,\r\n    maximise: PropTypes.bool,\r\n  };\r\n\r\n  state = {\r\n    showingPlus: false,\r\n  };\r\n\r\n  handleBarClick = (e) => {\r\n    e.stopPropagation();\r\n    this.props.createTab();\r\n  };\r\n\r\n  // handle clicking a tab\r\n  handleTabClick = (e, index) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.setActiveTab(index);\r\n  };\r\n\r\n  // handle remove clicked\r\n  handleRemoveClick = (e, index, instance) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.removeTab(index, instance.props.id);\r\n    return false;\r\n  };\r\n\r\n  removePlus = () => {\r\n    if (this.state.showingPlus) {\r\n      this.setState({ showingPlus: false });\r\n    }\r\n  }\r\n\r\n  showPlus = () => {\r\n    if (!this.state.showingPlus) {\r\n      this.setState({ showingPlus: true });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { showingPlus } = this.state;\r\n    const { style, active } = this.props;\r\n    const tabs = this.context.instances.map(({ index, instance }) => {\r\n      const title = (instance && instance.state) ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\r\n      return (\r\n        <Tab\r\n          key={index}\r\n          active={active === index}\r\n          onClick={e => this.handleTabClick(e, index)}\r\n          onFocus={e => this.handleTabClick(e, index)}\r\n          title={title}\r\n          tabIndex={0}\r\n        >\r\n          {this.context.instances.length > 1 && (\r\n            <TabClose\r\n              title=\"Close Tab\"\r\n              onMouseDown={e => this.handleRemoveClick(e, index, instance)}\r\n            >\r\n              x\r\n            </TabClose>\r\n          )}\r\n          {title}\r\n        </Tab>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <TabBar\r\n        style={{\r\n          ...style,\r\n          ...(this.context.maximise ? { maxWidth: '100%' } : {}),\r\n        }}\r\n      >\r\n        {tabs}\r\n        <TabBarEmpty\r\n          onMouseEnter={this.showPlus}\r\n          onMouseLeave={this.removePlus}\r\n        >\r\n          <TabPlus\r\n            visible={showingPlus}\r\n            onClick={this.handleBarClick}\r\n          >+\r\n          </TabPlus>\r\n        </TabBarEmpty>\r\n      </TabBar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tabs;\r\n"]}